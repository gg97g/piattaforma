<html>
  <head>
    <title> INDEX</title>
    <style>
    body {background-color: powderblue;}
</style>
  </head>
  <body>
     <div align="center">
       <img src="page.png">
     </div>
     <script>
      // Fetch API
      function caricaFile() {
      const dateTime = new Date();
      timestamp = Math.floor(dateTime / 1000);
      var img = "page.png";
    
      console.log('http://localhost/progetto/riscatto.php?timestamp=' + timestamp);
      fetch('http://localhost/progetto/riscatto.php?timestamp=' + timestamp)
      .then(response => response.json())
      .then(data => {
        console.log(data);
        document.body.appendChild(img);
        return data;
      })      
    }
    
    async function convertiJson() {
      let btc = caricaFile();
      console.log(btc);
    }
    //setTimer lo fa una sola volta 
    setInterval(() => {
      //console.log('http://localhost/progetto/generatoreqrcode.php');
      console.log(caricaFile());
    }, 60000);

    console.log(caricaFile());
  </script>
  
</body>
</html>
